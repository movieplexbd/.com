<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> <!-- Font Awesome CDN -->
    
<link rel="stylesheet" href="subscribers.css">
    <script type="module" src="subscribers.js"> </script>

    
    </head>
<body>
    <header>
        <a href="index.html" class="back-button"><i class="fas fa-arrow-left"></i> Back</a>
        <h1>Movie Details</h1>
    </header>

    <main id="movie-detail-container">
        <!-- Movie details will be inserted here -->
        <script type='text/javascript' src='//pl24567243.cpmrevenuegate.com/2c/2e/fe/2c2efe59679705a5241ee417a74e18d5.js'></script>
    </main>

<div id="subscribePopup">
    <h3>Subscribe for New Movie Updates!</h3>
    <input type="text" id="userName" placeholder="Your Name" required />
    <input type="email" id="userEmail" placeholder="Your Email" autocomplete="email" required />
    <button id="subscribeButton" disabled>Subscribe</button>
</div>

<div id="successMessage">Thanks for subscribing!</div>

    
<script async="async" data-cfasync="false" src="//pl24842883.profitablecpmrate.com/db6410f9ee511c6ccb6af5bf9c77b5cb/invoke.js"></script>
<div id="container-db6410f9ee511c6ccb6af5bf9c77b5cb"></div>
        
<style type="text/css">
        *{
        
        margin: 0;
        padding: 0;
        box-sizing:border-box;
        
        
        }
       .main-content{
       width:100%;
       
       
       
       }
        /* Styles for header */
        header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: #333;
        padding: 20px;
       
        }
       
        
        header h1 {
        margin: 0;
        font-size: 1.3em;
        color: #ddd;
        }
        
        .back-button {
        color: #ddd;
        text-decoration: none;
        font-size: 1.2em;
        transition: color 0.3s;
        }
        
        .back-button:hover {
        color: #ffe600;
        }
        
        /* Body and general styles */
        body {
        font-family: 'Arial', sans-serif;
        
        background-color: #1a1a1a;
        color: #ffffff;
        width:100%;
        box-sizing:border-box;
        }
        
        /* Container for movie details */
        #movie-detail-container {
        
        width:100%;
        margin: auto;
        
        }
        
        /* Movie detail card layout */
        .movie-detail-card {
        display: flex; /* Flexbox for side-by-side layout */
         /* Horizontal alignment */
        background-color: transparent;
        
       padding:10px;
        width:100%;
        
        
        }
        
        /* Image styling */
        .movie-detail-card img{
        width:100px; /* Image takes 40% width */
        height:200px; /* Maintain aspect ratio */
        object-fit: cover;
        border-radius: 10px;
        margin-right: 20px; /* Space between image and text */
        }
        
        /* Text content styling */
        .movie-detail-card-content {
        flex: 1; /* Take remaining space */
        text-align: left; /* Align text to the left */
        }
        
        .movie-detail-card-content h2 {
        font-size: 1.2em;
        margin: 10px 0;
        color: #72DFE0;
        }
        pre {
        white-space: pre-wrap; /* টেক্সট র‍্যাপ করবে */
        word-wrap: break-word; /* প্রয়োজন হলে শব্দ ভাঙবে */
        overflow: auto; /* ডিভ এর সীমানার বাইরে গেলে স্ক্রল যোগ হবে */
        font-family:'sans-serif', Courier, monospace;
        line-height: 1.5;
        }
        
        p {
        font-size: 0.92em;
        margin:5px 0;
        
        border: 1px solid #888;
        padding:5px;
        margin:3px;
        border-radius: 5px;
        word-wrap: break-word;
        overflow-wrap: break-word;
        }
        
        /* Download button */
        .download-button {
        display: inline-block;
        padding: 10px 25px;
        background-color: #72DFE0;
        color: #444;
        border: none;
        border-radius: 5px;
        text-decoration: none;
        font-size: 1em;
        transition: background-color 0.3s;
        margin-top: 15px;
        }
        
        .download-button:hover {
        background-color: #ddd;
        }
        
        /* Responsive design for small screens */
        @media (max-width: 600px) {
        
         /*Stack items vertically */
        
        
        .movie-detail-card img {
        width:150px; /* Full width on small screens */
        margin-bottom: 15px;
        }
        }
        
    </style>
        

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBsz-82MDaibWnIBUpoykrZHyJW7UMedX8",
            authDomain: "movies-bee24.firebaseapp.com",
            databaseURL: "https://movies-bee24-default-rtdb.firebaseio.com",
            projectId: "movies-bee24",
            storageBucket: "movies-bee24.appspot.com",
            messagingSenderId: "1080659811750",
            appId: "1:1080659811750:web:c1ef7d4dacc3ab17edc367"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        
        let clickCount = 0; // To count the number of clicks

        // Function to get movie details
        function getMovieDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const movieName = urlParams.get('name');

            const moviesRef = ref(db, 'movies');
            onValue(moviesRef, (snapshot) => {
                snapshot.forEach((childSnapshot) => {
                    const movie = childSnapshot.val();
                    if (movie.name === decodeURIComponent(movieName)) {
                        renderMovieDetails(movie);
                    }
                });
            });
        }

        // Render movie details
        function renderMovieDetails(movie) {
            const container = document.getElementById('movie-detail-container');
            container.innerHTML = `
                <div class="movie-detail-card">
                    <img src="${movie.fileURL}" alt="${movie.name}">
                    <h2>${movie.name}</h2>
                    <p><strong>Year:</strong> ${movie.year}</p>
                    <p><strong>Description:</strong> ${movie.description}</p>
                    <a href="#" class="download-button" id="download-link">Download Movie</a>
                </div>
            `;

            // Adding click event listener for download button
            const downloadButton = document.getElementById('download-link');
            downloadButton.addEventListener('click', (event) => {
                event.preventDefault(); // Prevent default anchor behavior
                clickCount++; // Increment click count
                if (clickCount < 3) {
                    // First two clicks show ad link
                    window.open(movie.adLink, '_blank'); // Open ad link in new tab
                } else {
                    // Third click shows actual download link
                    window.location.href = movie.downloadLink; // Redirect to download link
                }
            });
        }

        // Load movie details on page load
        getMovieDetails();
    </script>
</body>
</html>
